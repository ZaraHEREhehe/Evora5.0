<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.text.Text?>
<?import javafx.geometry.Insets?>

<AnchorPane xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.example.demo1.Pomodoro.PomodoroController"
            prefHeight="600" prefWidth="450" style="-fx-background-color: transparent;">

    <children>
        <VBox fx:id="mainContainer" alignment="TOP_CENTER" spacing="15"
              AnchorPane.topAnchor="0" AnchorPane.bottomAnchor="0"
              AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0">

            <!-- Header -->
            <VBox alignment="CENTER" spacing="3" style="-fx-padding: 10 0 5 0;">
                <Label fx:id="titleLabel" text="Pomodoro Timer ðŸ…" />
                <Label fx:id="subtitleLabel" text="Stay focused with the Pomodoro Technique!" />
            </VBox>

            <!-- Timer Presets -->
            <HBox spacing="8" alignment="CENTER">
                <ComboBox fx:id="presetBox" onAction="#presetSelected" prefWidth="180"/>
                <Button text="âš™ï¸" onAction="#toggleCustomSettings"
                        style="-fx-background-color: #FDF5E7; -fx-background-radius: 15; -fx-border-radius: 15;
                               -fx-border-color: #F1DBD0; -fx-padding: 6 10; -fx-font-size: 12px;"/>
            </HBox>

            <!-- Custom Timer Settings -->
            <VBox fx:id="customTimerContainer" alignment="CENTER" spacing="12"
                  maxWidth="380" visible="false" managed="false">
                <Label text="Custom Timer" style="-fx-text-fill: #343A26; -fx-font-size: 16px; -fx-font-weight: bold;"/>
                <HBox spacing="15" alignment="CENTER">
                    <VBox spacing="3">
                        <Label text="Work Minutes" style="-fx-text-fill: #8D9383; -fx-font-size: 11px;"/>
                        <Slider fx:id="workSlider" min="5" max="120" value="25" blockIncrement="5" prefWidth="140"/>
                    </VBox>
                    <VBox spacing="3">
                        <Label text="Break Minutes" style="-fx-text-fill: #8D9383; -fx-font-size: 11px;"/>
                        <Slider fx:id="breakSlider" min="1" max="60" value="5" blockIncrement="1" prefWidth="140"/>
                    </VBox>
                </HBox>
                <Button text="â° Set Custom Timer" onAction="#applyCustomTimer"
                        style="-fx-background-color: linear-gradient(to right, #FACEEA, #F0D2F7);
                               -fx-text-fill: #343A26; -fx-font-weight: bold; -fx-background-radius: 15;
                               -fx-padding: 8 16; -fx-font-size: 12px;"/>
            </VBox>

            <!-- Main Timer Card - Centered and Moved Upwards -->
            <VBox fx:id="timerCard" alignment="CENTER" spacing="12" maxWidth="380">

                <!-- Status -->
                <Label fx:id="statusLabel" text="ðŸ’¼ Work Session" />

                <!-- Circular Timer -->
                <StackPane>
                    <Circle fx:id="timerCircle" radius="85"
                            style="-fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 12, 0, 0, 3);"/>
                    <Circle radius="75" fill="white"
                            style="-fx-effect: dropshadow(gaussian, rgba(0,0,0,0.05), 8, 0, 0, 2);"/>
                    <VBox alignment="CENTER" spacing="3">
                        <Text fx:id="circularTimeText" text="25:00"
                              style="-fx-fill: #343A26; -fx-font-size: 28px; -fx-font-weight: bold;"/>
                        <Label text="Work" style="-fx-text-fill: #8D9383; -fx-font-size: 11px;"/>
                    </VBox>
                </StackPane>

                <!-- Controls -->
                <HBox alignment="CENTER" spacing="12">
                    <Button fx:id="startPauseButton" text="Start" onAction="#toggleTimer"
                            prefWidth="90" prefHeight="35"/>
                    <Button fx:id="resetButton" text="Reset" onAction="#resetTimer"
                            prefWidth="90" prefHeight="35"/>
                </HBox>

                <!-- Session Counter -->
                <VBox alignment="CENTER" spacing="8">
                    <Label text="Sessions Completed Today" style="-fx-text-fill: #8D9383; -fx-font-size: 11px;"/>
                    <HBox fx:id="sessionBox" alignment="CENTER" spacing="6"/>
                    <Label fx:id="sessionsCountLabel" text="0 ðŸ…"
                           style="-fx-text-fill: #343A26; -fx-font-size: 16px; -fx-font-weight: bold;"/>
                </VBox>
            </VBox>

            <!-- Animated Pet During Work -->

            <VBox fx:id="petContainer" alignment="CENTER" spacing="8" maxWidth="380" visible="false">
                <Label text="Your Pet is Working Hard! ðŸ’ª" style="-fx-text-fill: #343A26; -fx-font-weight: bold; -fx-font-size: 14px;"/>
                <Label text="Pet happiness will increase after this session!" style="-fx-text-fill: #8D9383; -fx-font-size: 11px;"/>
                <HBox alignment="CENTER" spacing="15">
                    <!-- Pixel Pet Placeholder -->
                    <StackPane style="-fx-background-color: linear-gradient(to bottom right, #C1DAFF, #D7D8FF);
                                     -fx-background-radius: 12; -fx-border-radius: 12; -fx-border-color: #FACEEA;
                                     -fx-border-width: 3; -fx-pref-width: 70; -fx-pref-height: 70;">
                        <Text text="ðŸ±" style="-fx-font-size: 20;"/>
                    </StackPane>
                    <VBox alignment="CENTER" spacing="3">
                        <Label text="ðŸ˜Š Happiness" style="-fx-text-fill: #343A26; -fx-font-size: 11px;"/>
                        <ProgressBar fx:id="petHappinessBar" prefWidth="70" progress="0.85"/>
                        <Label fx:id="petHappinessPercentLabel" text="85%" style="-fx-text-fill: #343A26; -fx-font-size: 11px;"/>
                    </VBox>
                </HBox>
            </VBox>


            <!-- Simple Happiness Label (No Bar) -->
            <Label fx:id="happinessLabel" text="ðŸ˜Š Happiness: 85%"
                   style="-fx-text-fill: #343A26; -fx-font-size: 14px; -fx-font-weight: bold;
                          -fx-background-color: #FDF5E7; -fx-background-radius: 10;
                          -fx-border-radius: 10; -fx-border-color: #F1DBD0;
                          -fx-padding: 8 16; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 6, 0, 0, 2);"/>
        </VBox>
    </children>
</AnchorPane>